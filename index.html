<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CAL-SR-01</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>
<body>
    <!-- Step 1: Landing with text and falling stones -->
    <div id="step1" class="step active">
        <div class="top-bar"></div>
        <div class="intro-text">
            <p>I live in an old apartment building.</p>
            <p>I drilled a hole in my wall.</p>
        </div>
        <div class="falling-stones-container" id="fallingStones"></div>
        <div class="bottom-bar"></div>
    </div>

    <!-- Step 2: Number creation workspace (0-9) -->
    <div id="step2" class="step">
        <div class="workspace">
            <!-- Drill button (top left corner) -->
            <button class="drill-button" id="drillButton">
                <span class="drill-text">drill</span>
            </button>

            <!-- Center canvas area -->
            <div class="canvas-area">
                <button class="nav-arrow nav-arrow-left" onclick="changeNumber(-1)">‹</button>
                <div class="canvas-wrapper">
                    <div class="preview-canvas" id="previewCanvas">
                        <canvas id="mainCanvas"></canvas>
                        <svg id="stonesSvg" class="stones-svg"></svg>
                    </div>
                </div>
                <button class="nav-arrow nav-arrow-right" onclick="changeNumber(1)">›</button>
            </div>

            <!-- Right sidebar with view options -->
            <div class="view-sidebar">
                <div class="view-option" id="oneView" onclick="switchView('one')">
                    <span>one</span>
                </div>
                <div class="view-divider"></div>
                <div class="view-option" id="allView" onclick="switchView('all')">
                    <span>all</span>
                </div>
                <div class="view-option" onclick="clearCanvas()">
                    <span>clear</span>
                </div>
                <div class="view-option pdf-option" onclick="goToStep(3)">
                    <span>→</span>
                </div>
            </div>
        </div>

        <!-- Grid view for "all" -->
        <div class="all-view-container" id="allViewContainer">
            <div class="all-view-grid" id="allViewGrid"></div>
        </div>
    </div>

    <!-- Step 3: Calendar selection and view -->
    <div id="step3" class="step">
        <div class="top-bar"></div>
        <div class="output-grid-two" id="outputSelection">
            <div class="output-option" onclick="selectOutput('calendar')">
                <span>Calender</span>
            </div>
            <div class="output-option" onclick="selectOutput('clock')">
                <span>Clock</span>
            </div>
        </div>
        <div class="bottom-bar"></div>
        <!-- Back button to Step 2 (only visible when selection is shown) -->
        <button class="selection-back-button" id="selectionBackButton" onclick="goToStep(2)" style="display: none;">←</button>
        
        <!-- Clock view (hidden initially) -->
        <div id="clockView" class="clock-view" style="display: none;">
            <div class="clock-container">
                <div class="clock-display" id="clockDisplay">
                    <!-- Clock numbers will be rendered here -->
                </div>
            </div>
            <button class="clock-invert-button" id="clockInvertButton" onclick="toggleClockInvert()"></button>
            <button class="clock-back-button" onclick="goBackToSelection()">←</button>
        </div>
        
        <!-- Calendar view (hidden initially) -->
        <div id="calendarView" class="calendar-view" style="display: none;">
            <div class="calendar-workspace">
                <!-- Month selection sidebar -->
                <div class="month-sidebar">
                    <div class="month-option" onclick="selectMonth(0)">Jan</div>
                    <div class="month-option" onclick="selectMonth(1)">Feb</div>
                    <div class="month-option" onclick="selectMonth(2)">Mär</div>
                    <div class="month-option" onclick="selectMonth(3)">Apr</div>
                    <div class="month-option" onclick="selectMonth(4)">Mai</div>
                    <div class="month-option" onclick="selectMonth(5)">Jun</div>
                    <div class="month-option" onclick="selectMonth(6)">Jul</div>
                    <div class="month-option" onclick="selectMonth(7)">Aug</div>
                    <div class="month-option" onclick="selectMonth(8)">Sep</div>
                    <div class="month-option" onclick="selectMonth(9)">Okt</div>
                    <div class="month-option" onclick="selectMonth(10)">Nov</div>
                    <div class="month-option" onclick="selectMonth(11)">Dez</div>
                </div>
                
                <!-- Calendar pages grid -->
                <div class="calendar-pages-container">
                    <div class="calendar-pages-grid" id="calendarPagesGrid"></div>
                </div>
            </div>
            
                <!-- Back and PDF export buttons -->
                <div class="calendar-buttons">
                    <button class="calendar-back-button" onclick="goBackToSelection()">←</button>
                    <button class="pdf-export-calendar-button" onclick="exportCalendarPDF()">pdf</button>
                </div>
        </div>
    </div>
        <div class="workspace">
            <!-- Drill button (top left corner) -->
            <button class="drill-button" id="drillButton">
                <span class="drill-text">drill</span>
            </button>

            <!-- Center canvas area -->
            <div class="canvas-area">
                <button class="nav-arrow nav-arrow-left" onclick="changeDay(-1)">‹</button>
                <div class="canvas-wrapper">
                    <div class="preview-canvas" id="previewCanvas">
                        <canvas id="mainCanvas"></canvas>
                        <svg id="stonesSvg" class="stones-svg"></svg>
                        <div class="canvas-label year">2026</div>
                        <div class="canvas-label month">01</div>
                    </div>
                </div>
                <button class="nav-arrow nav-arrow-right" onclick="changeDay(1)">›</button>
            </div>

            <!-- Shape selection sidebar -->
            <div class="shape-sidebar">
                <div class="shape-option active" id="shapeStone" onclick="selectShape('stone')">
                    <span>Stone</span>
                </div>
                <div class="shape-option" id="shapeBrick" onclick="selectShape('brick')">
                    <span>Brick</span>
                </div>
                <div class="shape-option" id="shapeConcrete" onclick="selectShape('concrete')">
                    <span>Concrete</span>
                </div>
                <div class="shape-option" id="shapeMat4" onclick="selectShape('mat4')">
                    <span>Mat4</span>
                </div>
            </div>

            <!-- Right sidebar with view options -->
            <div class="view-sidebar">
                <div class="view-option" id="oneView" onclick="switchView('one')">
                    <span>one</span>
                </div>
                <div class="view-divider"></div>
                <div class="view-option" id="allView" onclick="switchView('all')">
                    <span>all</span>
                </div>
                <div class="view-option" onclick="clearCanvas()">
                    <span>clear</span>
                </div>
                <div class="view-option pdf-option" onclick="exportPDF()">
                    <span>pdf</span>
                </div>
            </div>
        </div>

        <!-- Grid view for "all" -->
        <div class="all-view-container" id="allViewContainer">
            <div class="all-view-grid" id="allViewGrid"></div>
        </div>

    </div>

    <script src="script.js"></script>
</body>
</html>